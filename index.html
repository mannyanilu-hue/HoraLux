<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="index.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-dark justify-content-end fixed-top">
        <div class="container-fluid">
            <a href="#" class="navbar-brand">HoraLux</a>
        </div>
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="log.html">Login</a></li>
            <li class="nav-item"><a class="nav-link" href="cart.html">&#128722;</a></li>
            <li class="nav-item"><a class="nav-link" href="wishlist.html">&#9825;</a></li>
        </ul>
    </nav>
    <h2>" Timeless watches, endless choices "</h2>
    <div class="product-grid" id="productGrid"></div>

    <script>
        const products = [
            { id:1, name:'Cartier Men Watch', price:1714, image:'images/watch1.jpg' },
            { id:2, name:'Men Analog Watch', price:148.5, image:'images/watch2.jpg' },
            { id:3, name:'Maurice De Mauriac Watch', price:3622, image:'images/watch3.jpg' },
            { id:4, name:'Rolex Sea-Dweller Deepsea', price:3234, image:'images/watch4.jpg' },
            { id:5, name:'OMAX Analog Watch', price:91.4, image:'images/watch5.jpg' },
            { id:6, name:'Invicta Men Pro Diver', price:82.56, image:'images/watch6.jpg' },
            { id:7, name:'Sonata Women Glam Gold Analog Watch', price:18.31, image:'images/watch7.jpg' },
            { id:8, name:'Timex Coregen Smart Watch', price:49.23, image:'images/watch8.jpg' },
            { id:9, name:'Titan Glamour Women Quartz Multification Watch', price:156.95, image:'images/watch9.jpg' },
            { id:10, name:'Seiko Women Prospex Marine Sports Bracelet Starp Watch', price:898, image:'images/watch10.jpg' },
            { id:11, name:'Emporio Armani Women AR1840 Watch', price:307.67, image:'images/watch11.jpg' },
            { id:13, name:'Titan Men Nexus Blue Dialanalog', price:256.27, image:'images/watch13.jpg' },
            { id:14, name:'Titan Raga Facets Rose Gold Dial Women', price:96.85, image:'images/watch14.jpg' },
            { id:15, name:'Carlton London Women chelsea Analog Watch', price:36.93, image:'images/watch15.jpg' },
            { id:16, name:'Carlton London Women Victoria Analog Watch', price:40.95, image:'images/watch16.jpg' },
            { id:17, name:'Joker & Witch Women Nato Strap Watch', price:7.97, image:'images/watch17.jpg' },
            { id:18, name:'Invicta Men Pro Diver', price:82.04, image:'images/watch18.jpg' },
            { id:19, name:'fastrack Women Watch', price:10.25, image:'images/watch19.jpg' },
            { id:20, name:'Seiko 5 Sports Automatic Watch', price:513.05, image:'images/watch20.jpg' },
            { id:21, name:'Casio Unisex Vintage', price:6835, image:'images/watch21.jpg' }
        ]

        const productGrid = document.getElementById('productGrid');

        function renderProducts() {
            productGrid.innerHTML =products.map(product => `
            <div class="product">
                <img src="${product.image}" alt="${product.name}">
                <h3>${product.name}</h3>
                <p>$${product.price.toFixed(2)}</p>
                <button onclick="addToCart(${product.id})">Add to Cart</button>
                <button onclick="addToWishlist(${product.id})">Add to Wishlist</button>
                <button onclick="buyNow(${product.id})">Buy Now</button>
            </div>
            `).join('');
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            let cart = JSON.parse(localStorage.getItem('cart')) || [];;

            if(!Array.isArray(cart)) {
                cart = [];
            }

            cart.push(product);
            localStorage.setItem('cart',JSON.stringify(cart));

            setTimeout(() => {
                window.location.href = 'cart.html';
            },500);
        }

        // renderProducts();
        function addToWishlist(id) {
            const product = products.find(p => p.id === id);
            let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];;

            if(!Array.isArray(wishlist)) {
                wishlist = [];
            }

            if(wishlist.some(item => item.id === id)) {
                alert('Product is already in the wishlist!');
                return;
            }

            wishlist.push(product);
            localStorage.setItem('wishlist',JSON.stringify(wishlist));
            setTimeout(() => {
                window.location.href = 'wishlist.html';
            },500);
        }

        // renderProducts();
        function buyNow(id) {
            const product = products.find(p => p.id === id);
            localStorage.setItem('buyProduct',JSON.stringify(product));
            window.location.href = 'pay.html';
        }

        renderProducts();
    </script>
</body>
</html>